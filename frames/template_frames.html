<html>
<head></head>
<body>

<!-- Bootstrap v3.0.3 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Verdana, Geneva, sans-serif; color:#333333; font-size:0.9em; font-size: medium;">
<div class="row col-xs-12 col-md-12"><!-- Instructions -->
<div class="panel panel-primary">
<div class="panel-heading"><strong>Instructions</strong></div>

<div class="panel-body">
<p>You will be given <strong>a definition</strong> that can apply to a word, or set of words that are similar in meaning. From the list below, select <strong>all words</strong> that can be explained with the definition, in the context of the given sentence.</p>

<p>If none of the words in the list correspond to the definition, select <strong>None of the above</strong>.</p>
</div>
</div>
<!-- End Instructions --><!-- Content Body -->

<section>

<div class="panel panel-default">
<div class="panel-heading">The definition:</div>
<div class="panel-body"><span class="definition" id="definition">This frame deals with a <em>Healer</em> treating and curing an <em>Affliction</em> (the injuries, disease, or pain) of the <em>Patient</em>, sometimes also mentioning the use of a particular <em>Treatment</em> or <em>Medication</em>.</span></div>
</div>

<fieldset>
<label>In the sentences below, what are the words that can be explained by this definition?</label>

<div class="checkbox" id="checkbox">
</div>

<div id="demo" class="collapse">
Explain the meaning of <span id="phrase_question">advocates</span> in your own words:
<textarea name='WhyNone' rows=3 cols=80></textarea>
</div>

<input id="sentences" name="sentences" type="hidden" value="'In addition, many species regurgitate pellets, and fossil pellets that may have come from dinosaurs are known from as long ago as the Cretaceous period.','Columbus was host to the oldest continually operated bookstore in Indiana, Cummins Bookstore, which began operations in 1892 and closed in late 2007.','His eyesight later partly recovered.','Critics argued that Whorf's ideas were untestable and poorly formulated and that they were based on badly analyzed or misunderstood data.','The prize, administered by the Dylan Thomas Centre, is awarded at the annual Swansea Bay Film Festival.'" />
<input id="phrases" name="phrases" type="hidden" value="regurgitate,operated,recovered,analyzed,administered" />
<input id="b" name="b" type="hidden" value="4,7,4,17,2" />
<input id="e" name="e" type="hidden" value="5,8,5,15,3s" />

</fieldset>


</section>
<!-- End Content Body --></div>
</section>
<!-- close container -->
<style type="text/css">fieldset {
    padding: 10px;
    background:#fbfbfb;
    border-radius:5px;
    margin-bottom:5px;
    font-size: medium;
}

.checkbox label {
  padding: 10px;
}

.definition {
  font-family: Garamond, Georgia, serif;
  color: #0000A0;
  font-size: large;
  text-align:center;
}

.sentfieldset {
  border: 1px solid gray; padding: 10px; margin: 0px; -webkit-border-radius: 5px; -moz-border-radius: 5px;
  border-radius: 5px;
  background:white;
}

.sentlegend {
  text-align: left;
  font-size: medium;
}

.sentence{
  font-family: Garamond, Georgia, serif;
  margin-left:7px;
  margin-top:7px;
  font-style:italic;
}

#phrase_question {
  // text-transform: uppercase;
  font-weight: bold;
  color: darkblue;
  font-family: Garamond, Georgia, serif;
  font-size: medium;
}
</style>


<script type="text/javascript">

  (function($){function injector(t,splitter,klass,after){var a=t.text().split(splitter),inject='';if(a.length){$(a).each(function(i,item){inject+='<span class="'+klass+(i+1)+'">'+item+'</span>'+after});t.empty().append(inject)}}var methods={init:function(){return this.each(function(){injector($(this),'','char','')})},words:function(){return this.each(function(){injector($(this),' ','word',' ')})},lines:function(){return this.each(function(){var r="eefec303079ad17405c889e092e105b0";injector($(this).children("br").replaceWith(r).end(),r,'line','')})}};$.fn.lettering=function(method){if(method&&methods[method]){return methods[method].apply(this,[].slice.call(arguments,1))}else if(method==='letters'||!method){return methods.init.apply(this,[].slice.call(arguments,0))}$.error('Method '+method+' does not exist on jQuery.lettering');return this}})(jQuery);

 // var sentence = document.getElementById("sentence");
 // var b = parseInt(document.getElementById("b").getAttribute("value"));
 // var e = parseInt(document.getElementById("e").getAttribute("value"));
  
  
  var phrases = document.getElementById("phrases");
  var phrases_array = phrases.getAttribute("value").split("f\:").join("").split(",");
  var sentences = document.getElementById("sentences");
  var sentences_array = sentences.getAttribute("value").split("','");
  sentences_array[0] = sentences_array[0].substring(1);
  sentences_array[sentences_array.length - 1] = sentences_array[sentences_array.length - 1].slice(0, -1);
  var b = document.getElementById("b");
  var b_array = b.getAttribute("value").split(",");
  var e = document.getElementById("e");
  var e_array = e.getAttribute("value").split(",");
  
  for (var idx = 0; idx < phrases_array.length; idx++) {
    var label = document.createElement("label");
    
    var input = document.createElement("input");
    var input_name = document.createAttribute("name");
    input_name.value = "PhraseType";
    input.setAttributeNode(input_name);
    
    var type = document.createAttribute("type");
    type.value = "checkbox";
    input.setAttributeNode(type);
    var val = document.createAttribute("value");
    val.value = phrases_array[idx];
    input.setAttributeNode(val);
    var id = document.createAttribute("id");
    id.value = phrases_array[idx];
    input.setAttributeNode(id);
    label.appendChild(input);
    
    var label_text = document.createElement("span");
    label_text.innerHTML = "<span id=\"phrase_question\">" + phrases_array[idx] + "</span> from the sentence: <br /><span class=\"sentence\" id=\"sentence" + idx + "\">" + sentences_array[idx] + "</span><hr />";
    label.appendChild(label_text);
    
    document.getElementById("checkbox").appendChild(label);
//    document.getElementById("checkbox").appendChild(document.createElement("BR"));
//    document.getElementById("checkbox").appendChild(document.createElement("BR"));
  }
  
  var label = document.createElement("label");
  var input = document.createElement("input");
  var input_name = document.createAttribute("name");
  input_name.value = "PhraseType";
  input.setAttributeNode(input_name);
  var type = document.createAttribute("type");
  type.value = "checkbox";
  input.setAttributeNode(type);
  var val = document.createAttribute("value");
  val.value = "None of the above.";
  input.setAttributeNode(val);
  var id = document.createAttribute("id");
  id.value = "none";
  input.setAttributeNode(id);
  var dt = document.createAttribute("data-toggle");
  dt.value = "collapse";
  label.setAttributeNode(dt);
  var dtar = document.createAttribute("data-target");
  dtar.value = "#demo";
  label.setAttributeNode(dtar);
  document.getElementById("checkbox").appendChild(label);
  label.appendChild(input);
  var label_text = document.createTextNode("None of the above.");
  label.appendChild(label_text);
   
   $(document).ready(function(){
    //$(".collapse").collapse();
		$(".sentence").lettering('words');
		
		// give ids for each word (position in sentence)
		var spans = $(".sentence").find("span").each(function() {
			var idNumber = $(this).attr("class").slice(4);
			$(this).attr("id", idNumber);
		});
		
		for (var jdx = 0; jdx <= phrases_array.length; jdx++) {
		  for (var idx = parseInt(b_array[jdx]) + 1; idx <= parseInt(e_array[jdx]); idx++) {
		    //$(".word" + idx).css("text-transform", "uppercase");
		    $("#sentence" + jdx +  " .word" + idx).css("font-weight", "bold");
		    $("#sentence" + jdx +  " .word" + idx).css("font-size", "medium");
		    $("#sentence" + jdx +  " .word" + idx).css("color", "darkblue");
		    $("#sentence" + jdx +  " .word" + idx).css("font-style", "normal");
		  }
		}
		
		$("#none").change(function() {
		  if($(this).prop("checked")) {
		    for (var idx = 0; idx < phrases_array.length; idx++) {
		      $("#" + phrases_array[idx]).prop("checked", false);
		    }
		  }
		});
		for (var idx = 0; idx < phrases_array.length; idx++) {
  		$("#" + phrases_array[idx]).change(function() {
  		  if($(this).prop("checked")) {
  		    $("#none").prop("checked", false);
  		    $(".collapse").collapse("hide");
  		  }
  		});
		}
	});
  

</script>

<body>
</html>
